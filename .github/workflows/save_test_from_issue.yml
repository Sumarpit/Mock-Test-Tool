- name: Commit and Push changes
      run: |
        git config --global user.name "GitHub Action"
        git config --global user.email "action@github.com"
        
        # Stage the new files
        git add tests/*.json
        git add tests/test_manifest.json
        # If you are using the PDF upload workflow, keep this line too:
        # git add -u uploads/
        
        # Commit the changes
        git commit -m "Added test via Issue Ops: Processed JSON" || echo "No changes to commit"
        
        # --- THE FIX STARTS HERE ---
        # Pull the latest changes from the remote repo to avoid conflicts
        git pull --rebase origin main
        # --- THE FIX ENDS HERE ---
        
        # Now push
        git push
